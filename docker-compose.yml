services:
  # Next.js Application (using Supabase for Database, Auth, and Storage)
  app:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        # Build-time args (for Next.js build process)
        NEXT_PUBLIC_SUPABASE_URL: ${NEXT_PUBLIC_SUPABASE_URL:-placeholder}
        NEXT_PUBLIC_SUPABASE_ANON_KEY: ${NEXT_PUBLIC_SUPABASE_ANON_KEY:-placeholder}
    container_name: tradehive-app
    ports:
      - "3000:3000"
    environment:
      # Database (Supabase)
      DATABASE_URL: ${DATABASE_URL}
      
      # Supabase Auth
      NEXT_PUBLIC_SUPABASE_URL: ${NEXT_PUBLIC_SUPABASE_URL}
      NEXT_PUBLIC_SUPABASE_ANON_KEY: ${NEXT_PUBLIC_SUPABASE_ANON_KEY}
      SUPABASE_SERVICE_ROLE_KEY: ${SUPABASE_SERVICE_ROLE_KEY}
      
      # Stripe (add your keys)
      STRIPE_SECRET_KEY: ${STRIPE_SECRET_KEY:-}
      STRIPE_PUBLISHABLE_KEY: ${STRIPE_PUBLISHABLE_KEY:-}
      STRIPE_WEBHOOK_SECRET: ${STRIPE_WEBHOOK_SECRET:-}
      
      # Email (optional)
      SENDGRID_API_KEY: ${SENDGRID_API_KEY:-}
      RESEND_API_KEY: ${RESEND_API_KEY:-}
      
      # SMS (optional)
      TWILIO_ACCOUNT_SID: ${TWILIO_ACCOUNT_SID:-}
      TWILIO_AUTH_TOKEN: ${TWILIO_AUTH_TOKEN:-}
      TWILIO_PHONE_NUMBER: ${TWILIO_PHONE_NUMBER:-}
    restart: unless-stopped

